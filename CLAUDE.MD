# ClassMate AI - Memoria del Proyecto

> Documento de contexto para Claude AI Assistant y JosÃ© (agente experto)
> Ãšltima actualizaciÃ³n: 2 de Enero de 2026

**ğŸ“š Documentos relacionados:**
- [CLAUDE.MD](CLAUDE.MD) - Este archivo (memoria tÃ©cnica completa)
- [Project.MD](Project.MD) - VisiÃ³n, propÃ³sito y research del proyecto
- [AGENT-EXPERT.MD](AGENT-EXPERT.MD) - GuÃ­a del agente experto JosÃ©

### ğŸ“– CÃ³mo Usar Estos Documentos

**Para entender el "por quÃ©" del proyecto:**
â†’ Lee [Project.MD](Project.MD) - Contiene la fundamentaciÃ³n educativa, research acadÃ©mico, y propÃ³sito del sistema

**Para entender el "cÃ³mo" tÃ©cnico:**
â†’ Lee este archivo (CLAUDE.MD) - Arquitectura, Firebase schema, bugs resueltos, convenciones de cÃ³digo

**Para obtener ayuda experta:**
â†’ Usa `@jose` siguiendo las instrucciones en [AGENT-EXPERT.MD](AGENT-EXPERT.MD) - Agente especializado en Node.js, React, Firebase e IA educativa

**Flujo recomendado para nuevos colaboradores:**
1. Project.MD â†’ Entender el problema educativo y visiÃ³n
2. CLAUDE.MD â†’ Familiarizarse con arquitectura tÃ©cnica
3. src/App.js â†’ Revisar cÃ³digo principal
4. @jose â†’ Pedir ayuda cuando necesites implementar features

---

## ğŸ“‹ Resumen Ejecutivo

**ClassMate AI** es un sistema de asistencia en el aula que permite a estudiantes hacer preguntas anÃ³nimas durante clases en tiempo real, recibir respuestas simuladas por IA (mÃ©todo Wizard of Oz), y proporciona analytics a profesores sobre confusion hotspots y engagement.

### VisiÃ³n del Proyecto (ver [Project.MD](Project.MD) para detalles completos)

**Problema identificado (respaldado por research):**
- Los profesores hacen 300-400 preguntas/dÃ­a vs estudiantes 1 pregunta/semana (Almeida, 2012)
- 80%+ de estudiantes evitan preguntar por miedo al juicio social o quieren resolver problemas solos (van der Meij, 1988)
- Brecha entre lo que profesores creen que estudiantes entienden vs realidad
- Estudiantes normalizan independencia y temen juicio negativo de sus pares
- Bajos niveles de preguntas estudiantiles correlacionan con menor rendimiento acadÃ©mico

**Nuestra soluciÃ³n:**
- Canal de comunicaciÃ³n anÃ³nima en tiempo real (elimina barreras psicolÃ³gicas)
- AI responde preguntas basadas en curriculum del profesor (continuidad pedagÃ³gica)
- Dashboard de "confusion hotspots" para el profesor (visibilidad en tiempo real)
- Post-class insights sobre engagement y patrones de aprendizaje
- Sistema hÃ­brido: AI + educador profesional para insights valiosos y confiables
- TecnologÃ­a como actividad que agrega valor, no como reemplazo

### Estado Actual del Proyecto
- âœ… VersiÃ³n funcional desplegada localmente
- âœ… Bug de confusion hotspots corregido (2 Ene 2026)
- ğŸš§ En fase de prototyping con Wizard of Oz testing
- ğŸ“ Preparado para integraciÃ³n futura de IA real

---

## ğŸ¯ Objetivos y PropÃ³sito del Proyecto

### Objetivo Principal
Mejorar el engagement estudiantil y la comprensiÃ³n del profesor sobre el proceso de aprendizaje mediante tecnologÃ­a que **agrega valor** sin reemplazar al educador.

### Research Questions (ver [Project.MD](Project.MD) para contexto completo)

**Preguntas de investigaciÃ³n principales:**
1. Â¿El anonimato aumenta la participaciÃ³n estudiantil y elimina barreras psicolÃ³gicas?
2. Â¿Los confusion hotspots ayudan al profesor a ajustar su enseÃ±anza en tiempo real?
3. Â¿Los estudiantes confÃ­an en las respuestas proporcionadas por el sistema AI?
4. Â¿QuÃ© patrones de confusiÃ³n emergen durante las clases?
5. Â¿CÃ³mo se compara el engagement digital con la percepciÃ³n del profesor?
6. Â¿El sistema permite identificar estudiantes que "necesitan atenciÃ³n"?

**MÃ©todo de investigaciÃ³n:**
- Wizard of Oz testing (operador humano simula IA)
- Permite evaluar confianza en IA sin implementarla completamente
- Facilita iteraciÃ³n rÃ¡pida del diseÃ±o UX
- Genera insights sobre quÃ© caracterÃ­sticas de IA serÃ¡n mÃ¡s valiosas

### Stakeholders y Beneficios

**Estudiantes:**
- Preguntar sin miedo al juicio (elimina exposiciÃ³n social)
- Respuestas inmediatas durante clase (no despuÃ©s en homework/tests)
- ClarificaciÃ³n de conceptos en tiempo real
- Canal de comunicaciÃ³n sin vulnerabilidad ante el profesor
- Fomenta cultura de hacer preguntas vs pretender que se entiende

**Profesores:**
- Visibilidad en tiempo real de confusion hotspots
- Insights post-clase sobre engagement (activos vs inactivos)
- Identificar estudiantes que necesitan atenciÃ³n
- Ver razonamiento y patrones de pensamiento de estudiantes
- Datos para mejorar pedagogÃ­a y planificar futuras clases
- Entender brecha entre percepciÃ³n y realidad de comprensiÃ³n
- Capacidad de re-explicar conceptos confusos durante la clase

**Sistema educativo:**
- Mejores outcomes de aprendizaje (research muestra correlaciÃ³n entre preguntas y rendimiento)
- IntegraciÃ³n suave de tecnologÃ­a en el aula (sin reemplazar educador)
- Research sobre patrones de aprendizaje y adquisiciÃ³n de conocimiento tÃ¡cito
- TransiciÃ³n hacia tecnologÃ­a como valor agregado
- Ciclo virtuoso: mejor comprensiÃ³n â†’ enseÃ±anza mÃ¡s efectiva â†’ mayor engagement

---

## ğŸ—ï¸ Arquitectura del Sistema

### Stack TecnolÃ³gico

**Frontend:**
- React 18.2.0
- Tailwind CSS (vÃ­a CDN)
- Single Page Application (SPA)

**Backend:**
- Firebase Realtime Database
- No servidor tradicional (serverless)

**Infraestructura:**
- Node.js 24.12.0
- npm 11.6.2
- Git (usuario: amarazioli)

### Estructura del Proyecto

```
ClassMateCode/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html           # HTML base con Tailwind CDN
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.js              # Componente principal (1033 lÃ­neas)
â”‚   â””â”€â”€ index.js            # Entry point de React
â”œâ”€â”€ package.json            # Dependencias del proyecto
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ CLAUDE.MD              # Este archivo
```

### Componentes Principales (src/App.js)

```javascript
App
â”œâ”€â”€ LandingPage          // PÃ¡gina de inicio con selecciÃ³n de roles
â”œâ”€â”€ StudentView          // Interfaz para estudiantes
â”œâ”€â”€ OperatorView         // Panel Wizard of Oz (operador)
â”œâ”€â”€ TeacherView          // Dashboard para profesores
â””â”€â”€ AllViewsPage         // Vista demo con las 3 interfaces
```

---

## ğŸ”¥ Firebase Database Schema

```javascript
sessions/
  class-session-1/           // ID de sesiÃ³n hardcodeado
    â”œâ”€â”€ messages/            // Todas las conversaciones
    â”‚   â””â”€â”€ [messageId]/
    â”‚       â”œâ”€â”€ id           // ID Ãºnico del mensaje
    â”‚       â”œâ”€â”€ type         // 'student' o 'ai'
    â”‚       â”œâ”€â”€ text         // Contenido del mensaje
    â”‚       â”œâ”€â”€ timestamp    // Unix timestamp
    â”‚       â”œâ”€â”€ studentId    // ID del estudiante
    â”‚       â”œâ”€â”€ studentName  // Nombre del estudiante
    â”‚       â”œâ”€â”€ status       // 'pending' | 'solved' | 'flagged'
    â”‚       â”œâ”€â”€ replyTo      // ID del mensaje al que responde (solo AI)
    â”‚       â”œâ”€â”€ confusionTopic  // Tema de confusiÃ³n (opcional)
    â”‚       â”œâ”€â”€ feedbackGiven   // Boolean
    â”‚       â”œâ”€â”€ feedbackType    // 'solved' | 'flagged'
    â”‚       â”œâ”€â”€ isFollowUp      // NUEVO: Boolean - si es follow-up (2 min window)
    â”‚       â””â”€â”€ followsUpOn     // NUEVO: messageId - ID de pregunta anterior
    â”‚
    â”œâ”€â”€ queue/               // Cola de preguntas pendientes
    â”‚   â””â”€â”€ [messageId]      // Copia del mensaje student
    â”‚
    â”œâ”€â”€ students/            // Estudiantes conectados
    â”‚   â””â”€â”€ [studentId]/
    â”‚       â”œâ”€â”€ name
    â”‚       â”œâ”€â”€ joinedAt
    â”‚       â”œâ”€â”€ active
    â”‚       â”œâ”€â”€ lastActivity
    â”‚       â””â”€â”€ questionsAsked
    â”‚
    â”œâ”€â”€ confusion/           // Contadores de confusion por tema
    â”‚   â””â”€â”€ [topic]/
    â”‚       â””â”€â”€ count        // NÃºmero de veces que se flaggeÃ³
    â”‚
    â””â”€â”€ flagged/             // Preguntas marcadas para profesor
        â””â”€â”€ [flagId]/
            â”œâ”€â”€ id
            â”œâ”€â”€ questionId   // ID del mensaje original
            â”œâ”€â”€ text         // Texto de la pregunta
            â”œâ”€â”€ topic        // Tema de confusiÃ³n
            â”œâ”€â”€ timestamp
            â”œâ”€â”€ aiResponse   // Respuesta que dio el AI
            â”œâ”€â”€ studentId
            â””â”€â”€ studentName
```

### Firebase Configuration
- **Database URL:** `https://classmate-ai-41020-default-rtdb.europe-west1.firebasedatabase.app`
- **Project ID:** `classmate-ai-41020`
- **Region:** Europe West 1

---

## ğŸ‘¥ Roles del Sistema

### 1. Student (Estudiante)
**URL:** `#student`

**Funcionalidades:**
- Seleccionar identidad de lista predefinida (10 estudiantes)
- Hacer preguntas anÃ³nimas en tiempo real
- Recibir respuestas del "AI" (operador)
- **NUEVO:** Ver indicador animado "AI is thinking..." mientras espera respuesta
- Dar feedback: "Yes, solved!" o "Flag for teacher"
- Ver historial de su conversaciÃ³n

**CaracterÃ­sticas:**
- Las preguntas son anÃ³nimas para otros estudiantes
- El profesor puede ver quiÃ©n preguntÃ³ (para analytics)
- Interfaz de chat limpia y simple
- **NUEVO:** Follow-up questions se trackean automÃ¡ticamente (si pregunta en <2 min)

### 2. Operator (Operador - Wizard of Oz)
**URL:** `#operator`

**Funcionalidades:**
- Ver cola de preguntas pendientes en tiempo real
- **NUEVO:** DetecciÃ³n automÃ¡tica de preguntas duplicadas con alerta visual
- **NUEVO:** BotÃ³n "Reuse previous answer" para preguntas similares
- **NUEVO:** Indicador de follow-up questions (preguntas dentro de 2 minutos)
- Seleccionar tema de confusiÃ³n (opcional): "Quadratic Formula", "Factoring", etc.
- Escribir respuestas simulando ser IA
- Quick replies predefinidas
- Las respuestas aparecen como "AI" para los estudiantes

**Proceso:**
1. Pregunta llega al queue
2. **NUEVO:** Sistema detecta si es similar a preguntas anteriores (50% word overlap)
3. **NUEVO:** Sistema detecta si es follow-up del mismo estudiante
4. Operador selecciona pregunta
5. Operador selecciona tema (opcional)
6. Operador escribe respuesta (o reutiliza respuesta anterior)
7. Respuesta se envÃ­a al estudiante como "AI"

### 3. Teacher (Profesor)
**URL:** `#teacher`

**Funcionalidades:**

**Modo Live:**
- Ver mÃ©tricas en tiempo real:
  - NÃºmero de estudiantes conectados
  - Total de preguntas
  - Preguntas resueltas
  - Preguntas flagged
- **Confusion Hotspots:** VisualizaciÃ³n de temas que causan mÃ¡s confusiÃ³n
- Sugerencias automÃ¡ticas cuando un tema tiene 2+ flags

**Modo Post-Class:**
- Lista de estudiantes participantes
- Todas las preguntas con sus estados
- EstadÃ­sticas de la sesiÃ³n

### 4. All Views (Demo)
**URL:** `#all`

Muestra las 3 interfaces (Student, Operator, Teacher) lado a lado para demos y testing.

---

## ğŸ”„ Flujo de Datos Principal

### 1. Estudiante hace pregunta
```javascript
sendMessage() {
  1. Crear mensaje en /messages con status='pending'
  2. Agregar a /queue
  3. Actualizar /students/{id}/lastActivity
}
```

### 2. Operador responde
```javascript
sendReply() {
  1. Crear respuesta AI en /messages con replyTo=questionId
  2. Incluir confusionTopic si fue seleccionado
  3. Remover de /queue
}
```

### 3. Estudiante da feedback
```javascript
handleFeedback(type) {
  1. Actualizar mensaje AI con feedbackGiven=true
  2. Actualizar mensaje estudiante con status=type

  Si type === 'flagged' && confusionTopic:
    3. Incrementar /confusion/{topic}/count (ATOMIC)
    4. Crear entrada en /flagged/
}
```

---

## ğŸ› Bugs Corregidos

### Bug #1: Confusion Hotspots no aparecen (RESUELTO)
**Fecha:** 2 de Enero de 2026

**Problema:**
Cuando estudiantes flaggeaban preguntas, a veces no aparecÃ­an en confusion hotspots.

**Causa RaÃ­z:**
1. **Lookup de mensaje local:** El cÃ³digo buscaba el mensaje original en el state local de React (`messages.find()`), que podÃ­a estar desincronizado con Firebase.
2. **Race condition:** Uso de `onValue` + `set` en lugar de transacciones atÃ³micas para incrementar contadores.

**SoluciÃ³n Implementada:**

```javascript
// ANTES (lÃ­nea 322):
const originalQuestion = messages.find(m => m.id === studentMsgId);

// DESPUÃ‰S (lÃ­nea 329-347):
const questionRef = ref(db, `sessions/${SESSION_ID}/messages/${studentMsgId}`);
onValue(questionRef, (snapshot) => {
  const originalQuestion = snapshot.val();
  // ... crear flagged entry
}, { onlyOnce: true });
```

```javascript
// ANTES (lÃ­neas 316-320):
onValue(confusionRef, (snapshot) => {
  const current = snapshot.val()?.count || 0;
  set(confusionRef, { count: current + 1 });
}, { onlyOnce: true });

// DESPUÃ‰S (lÃ­neas 318-323):
runTransaction(confusionRef, (current) => {
  if (current) {
    return { count: (current.count || 0) + 1 };
  } else {
    return { count: 1 };
  }
});
```

**Archivos modificados:**
- `src/App.js` (lÃ­neas 3, 316-347)
  - AÃ±adido `runTransaction` al import de Firebase
  - Reemplazado lookup local por lectura directa de Firebase
  - Implementado transacciÃ³n atÃ³mica para contadores

**Estado:** âœ… Resuelto y testeado

---

## ğŸ¯ Features Clave

### 1. Anonimato Selectivo
- Preguntas anÃ³nimas entre estudiantes
- Profesor puede ver autorÃ­a (para analytics)

### 2. Confusion Hotspots
- DetecciÃ³n automÃ¡tica de temas problemÃ¡ticos
- VisualizaciÃ³n en barras de progreso
- Sugerencias automÃ¡ticas al profesor

### 3. Real-time Sync
- Todos los datos sincronizan en tiempo real
- Firebase listeners en todos los componentes
- Sin necesidad de refrescar

### 4. Wizard of Oz (Mejoras implementadas 2 Ene 2026)
- Operador humano simula IA
- Estudiantes creen que es IA real
- Ãštil para research y testing

**Mejoras Wizard of Oz implementadas:**

**Mejora #5 - DetecciÃ³n de Duplicados:**
- Algoritmo de word overlap (50% similitud)
- Alerta visual automÃ¡tica cuando pregunta es similar a otra
- BotÃ³n "Reuse previous answer" para eficiencia del operador
- Filtra palabras cortas (<3 caracteres) para mejor precisiÃ³n
- Muestra preview de pregunta similar detectada

**Mejora #7 - Tracking de Follow-ups:**
- DetecciÃ³n automÃ¡tica de follow-up questions (ventana de 2 minutos)
- Campo `isFollowUp: boolean` en Firebase para cada pregunta
- Campo `followsUpOn: messageId` para rastrear cadena de preguntas
- Indicador visual "â†©ï¸ Follow-up question" en OperatorView
- Ãštil para medir efectividad de respuestas y engagement

**Mejora #11 - Indicador "AI is thinking...":**
- Indicador animado con 3 puntos parpadeantes
- Se muestra mientras estudiante espera respuesta del AI
- Mejora UX y mantiene engagement
- CSS animations para efecto profesional
- Solo visible cuando pregunta estÃ¡ en queue sin respuesta aÃºn

### 5. Analytics BÃ¡sicos
- Engagement de estudiantes
- Rate de resoluciÃ³n de preguntas
- Temas mÃ¡s confusos

---

## ğŸš€ Features Planeadas (Ideas)

### AnÃ¡lisis con IA
1. **Clasificador automÃ¡tico de preguntas** (NLP)
2. **Detector de urgencia**
3. **Evaluador de calidad de respuestas**

### Asistencia Inteligente
4. **Auto-sugerencias de respuestas**
5. **Predictor de confusiÃ³n**
6. **AgrupaciÃ³n inteligente de preguntas similares**

### Analytics Avanzados
7. **Predictor de engagement**
8. **AnÃ¡lisis de learning paths**
9. **Detector de misconceptions**

### UX Mejorado
10. **Chatbot assistant para profesor**
11. **UI adaptativa segÃºn contexto**
12. **Input por voz**

---

## ğŸ“¦ Dependencias del Proyecto

```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1",
    "firebase": "^10.7.0"
  }
}
```

### Scripts Disponibles
```bash
npm start    # Ejecutar dev server (puerto 3000)
npm build    # Build para producciÃ³n
```

---

## ğŸ”§ ConfiguraciÃ³n del Entorno

### Node.js
- VersiÃ³n: 24.12.0 LTS
- Instalado vÃ­a: winget (Windows)
- PATH configurado: `C:\Program Files\nodejs`

### Git
- Usuario: `amarazioli`
- Email: `amarazioli@users.noreply.github.com`
- Repositorio: https://github.com/amarazioli/classmate-ai.git

### Servidor de Desarrollo

**âš ï¸ IMPORTANTE: MÃ©todo correcto para iniciar el servidor desde Claude Code**

El entorno Git Bash de Claude tiene problemas de PATH con Node.js. El ÃšNICO mÃ©todo que funciona es:

**MÃ©todo 1 (Recomendado - PowerShell Script):**
```bash
# Crear script temporal y ejecutarlo
# 1. Crear archivo start-dev-server.ps1 con:
$env:PATH = "C:\Program Files\nodejs;" + $env:PATH
Set-Location "C:\Users\amara\Downloads\ClassMateCode"
& "C:\Program Files\nodejs\npm.cmd" start

# 2. Ejecutar:
powershell.exe -ExecutionPolicy Bypass -File "C:\Users\amara\Downloads\ClassMateCode\start-dev-server.ps1"
```

**MÃ©todo 2 (Batch file existente):**
```bash
# Ejecutar el script start-server.bat (ya existe en el proyecto)
cmd.exe /c "C:\Users\amara\Downloads\ClassMateCode\start-server.bat"
```

**âŒ MÃ‰TODOS QUE NO FUNCIONAN:**
- `npm start` directo desde Git Bash (PATH issues)
- `powershell.exe -Command "npm start"` (PowerShell no hereda PATH)
- Configurar PATH con `export` o `set` (no persiste)

**Verificar que el servidor estÃ¡ corriendo:**
```bash
netstat -ano | findstr :3000
# Debe mostrar: TCP 0.0.0.0:3000 ... LISTENING
```

**Servidor accesible en:**
- Local: http://localhost:3000
- Red: http://192.168.1.50:3000

---

## ğŸ“ Convenciones de CÃ³digo

### Estilo de Componentes
- Functional components con hooks
- State management local (useState, useEffect)
- Firebase listeners con cleanup en useEffect

### Naming Conventions
- Componentes: PascalCase (`StudentView`)
- Funciones: camelCase (`handleFeedback`)
- Constantes: UPPER_SNAKE_CASE (`SESSION_ID`)

### Firebase Operations
- Usar `runTransaction` para operaciones atÃ³micas
- Incluir `{ onlyOnce: true }` para lecturas Ãºnicas
- Siempre limpiar listeners en useEffect cleanup

---

## ğŸ¨ Design System

### Colores Principales
- **Student:** Azul (`#3b82f6` â†’ `#2563eb`)
- **Teacher:** Verde (`#34d399` â†’ `#059669`)
- **Operator:** Rojo (`#f87171` â†’ `#dc2626`)
- **Background:** Slate (`#eff3f7`, `#1e293b`, `#0f172a`)

### Gradientes
```css
linear-gradient(135deg, color1 0%, color2 100%)
linear-gradient(145deg, #1e293b 0%, #0f172a 100%)
```

---

## ğŸ§ª Testing

### Manual Testing Checklist
- [ ] Estudiante puede hacer pregunta
- [ ] Operador ve pregunta en queue
- [ ] Operador puede responder con/sin topic
- [ ] Estudiante recibe respuesta
- [ ] Feedback "solved" funciona
- [ ] Feedback "flagged" incrementa confusion
- [ ] Confusion hotspots aparecen en teacher view
- [ ] Reset session limpia todos los datos

### Test Participants (Hardcoded)
```javascript
const TEST_PARTICIPANTS = [
  { id: "emma", name: "Emma V." },
  { id: "lucas", name: "Lucas D." },
  { id: "sophie", name: "Sophie M." },
  // ... 7 mÃ¡s (total 10)
];
```

---

## ğŸ” Seguridad y Consideraciones

### Firebase Security Rules
âš ï¸ **PENDIENTE:** Implementar Firebase Security Rules
- Actualmente la database es pÃºblica (solo para desarrollo)
- Necesario implementar antes de producciÃ³n

### API Keys
âš ï¸ Las API keys de Firebase estÃ¡n en `src/App.js` (lÃ­neas 8-16)
- Esto es OK para Realtime Database con security rules
- Considerar moverlas a `.env` en producciÃ³n

---

## ğŸ“š Recursos y Referencias

### DocumentaciÃ³n
- [Firebase Realtime Database](https://firebase.google.com/docs/database)
- [React Hooks](https://react.dev/reference/react)
- [Tailwind CSS](https://tailwindcss.com/docs)

### Conceptos Clave
- **Wizard of Oz:** TÃ©cnica de research donde humanos simulan IA
- **Confusion Hotspots:** VisualizaciÃ³n de temas problemÃ¡ticos
- **Anonymous Questions:** Preguntas anÃ³nimas para reducir miedo

---

## ğŸ“ Contexto Educativo y Research

### FundamentaciÃ³n del Proyecto (ver [Project.MD](Project.MD))

**Problema educativo identificado:**
- Disparidad 300-400 : 1 en preguntas profesor vs estudiante (Almeida, 2012)
- 80%+ estudiantes evitan pedir ayuda por normas de independencia o miedo al juicio (van der Meij, 1988)
- MÃ©tricas tradicionales (homework, tests) ocurren despuÃ©s de clase â†’ confusiÃ³n se acumula
- Profesores no tienen forma de medir comprensiÃ³n real en tiempo real

**Objetivo PedagÃ³gico:**
Fomentar participaciÃ³n de estudiantes que no se animan a preguntar en clase por:
- Miedo al ridÃ­culo y juicio social
- Timidez o introversiÃ³n
- PercepciÃ³n de que sus preguntas son "bÃ¡sicas" o "tontas"
- Normas internalizadas de independencia

**InnovaciÃ³n educativa:**
- Confidencialidad del chatbot elimina barreras psicolÃ³gicas
- Responsividad e interactividad aumentan engagement
- Canal anÃ³nimo permite vulnerabilidad sin exposiciÃ³n
- Sistema hÃ­brido mantiene credibilidad del educador profesional

### CaracterÃ­sticas del Sistema Basadas en Research

**Anonimato selectivo:** Estudiantes anÃ³nimos entre sÃ­, pero profesor puede ver autorÃ­a para analytics (no para juzgar)

**Filtros de seguridad:** Preguntas vulgares u ofensivas bloqueadas para fomentar confianza del educador

**Respuestas basadas en curriculum:** AI solo responde con materiales del profesor (textbooks, slides) para garantizar continuidad pedagÃ³gica

**Flagging inteligente:** Preguntas que AI no puede responder con confianza se escalan al profesor

**Post-class insights:** Permite identificar estudiantes inactivos que "necesitan atenciÃ³n"

---

## ğŸ¤– Agente Experto JosÃ©

### InvocaciÃ³n
Usar sintaxis `@jose [tipo] [descripciÃ³n]` para activar modo experto.
Ver [AGENT-EXPERT.MD](AGENT-EXPERT.MD) para guÃ­a completa del agente.

### Tipos de Tareas
- `feature`: Implementar nueva funcionalidad
- `improve`: Mejorar cÃ³digo existente
- `debug`: Resolver problemas
- `ideate`: Idear features con IA
- `architect`: ConsultorÃ­a arquitectura
- `review`: Code review

### Expertise
- Node.js y React (hooks, performance, patterns)
- Firebase (Realtime DB, transactions, optimization)
- IA en EducaciÃ³n (NLP, analytics, adaptive learning)
- UX/UI Educativo (a11y, mobile, real-time feedback)

---

## ğŸ“Š MÃ©tricas del Proyecto

### CÃ³digo
- **Total lÃ­neas:** ~1100
- **Archivo principal:** App.js (1033 lÃ­neas)
- **Componentes:** 5 principales
- **Hooks usados:** useState, useEffect, useRef

### Firebase
- **Colecciones:** 5 (messages, queue, students, confusion, flagged)
- **Listeners activos:** ~8 (dependiendo de vistas abiertas)
- **Operaciones:** Reads, writes, transactions

---

## ğŸ”„ Historial de Cambios

### 2 de Enero de 2026
- âœ… Corregido bug de confusion hotspots
- âœ… Implementado `runTransaction` para contadores atÃ³micos
- âœ… Mejorado lookup de mensajes (Firebase directo vs local state)
- âœ… AÃ±adido error handling con `.catch()`
- âœ… Configurado Git (usuario: amarazioli)
- âœ… Creado documento CLAUDE.MD (memoria tÃ©cnica)
- âœ… Creado AGENT-EXPERT.MD (agente JosÃ©)
- âœ… Integrado Project.MD en memoria permanente
- âœ… AÃ±adida fundamentaciÃ³n educativa y research a documentaciÃ³n
- âœ… Actualizado cross-references entre los 3 documentos principales
- âœ… Instalado Claude Code CLI v2.0.76 (vÃ­a npm)
- âœ… Creado script helper `claude.sh` para ejecutar desde Git Bash
- âœ… Configurado PATH de Windows para incluir npm global
- âœ… Implementadas 3 mejoras Wizard of Oz: Mejora #5 (detecciÃ³n duplicados), #7 (tracking follow-ups), #11 (indicador "AI thinking")
- âœ… Documentado mÃ©todo correcto para iniciar servidor de desarrollo

### HistÃ³rico Anterior
- ImplementaciÃ³n inicial del sistema
- IntegraciÃ³n con Firebase
- DiseÃ±o de las 4 vistas principales
- Sistema de confusion hotspots

---

## ğŸ’¡ Notas para Claude

### Cuando trabajas en este proyecto:
1. **Leer este archivo primero** para contexto tÃ©cnico completo
2. **Leer [Project.MD](Project.MD)** para entender visiÃ³n y research questions
3. **Usar @jose** para tareas especÃ­ficas (ver [AGENT-EXPERT.MD](AGENT-EXPERT.MD))
4. **Revisar** `src/App.js` antes de modificar
5. **Considerar** impacto en Firebase (lecturas/escrituras)
6. **Mantener** diseÃ±o consistente con colores establecidos
7. **Testear** con las 3 vistas abiertas simultÃ¡neamente
8. **Recordar** que estamos en fase Wizard of Oz (no IA real aÃºn)

### Archivos Clave

**CÃ³digo:**
- `src/App.js` - Todo el cÃ³digo de la aplicaciÃ³n
- `public/index.html` - HTML base con Tailwind CDN
- `package.json` - Dependencias
- `.gitignore` - Archivos ignorados por Git

**DocumentaciÃ³n:**
- `CLAUDE.MD` - Este archivo (memoria tÃ©cnica)
- `Project.MD` - VisiÃ³n, research, propÃ³sito educativo
- `AGENT-EXPERT.MD` - GuÃ­a del agente experto JosÃ©
- `README.md` - DescripciÃ³n bÃ¡sica del proyecto

### Firebase Paths Importantes
```javascript
const SESSION_ID = "class-session-1";  // Hardcoded session ID

// Paths principales:
`sessions/${SESSION_ID}/messages`
`sessions/${SESSION_ID}/queue`
`sessions/${SESSION_ID}/students`
`sessions/${SESSION_ID}/confusion`
`sessions/${SESSION_ID}/flagged`
```

---

## ğŸ“ Contacto del Proyecto

**Desarrollador:** Amara Zioli
- GitHub: [@amarazioli](https://github.com/amarazioli)
- Repositorio: https://github.com/amarazioli/classmate-ai.git

---

*Este documento es una memoria viva del proyecto y se actualiza conforme evoluciona ClassMate AI.*
